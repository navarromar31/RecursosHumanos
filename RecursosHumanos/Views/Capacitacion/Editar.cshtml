@model RecursosHumanos_Models.Capacitacion
@{
    ViewData["Title"] = "Editar";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<form asp-action="Editar" method="post" enctype="multipart/form-data" class="p-3">
    <!-- Campo oculto para el ID -->
    <input type="hidden" asp-for="Id" />

    <!-- Imagen -->
    <div class="text-center mb-4">
        <img src="@(Model.ImagenUrlCap ?? "https://via.placeholder.com/150")" id="previewImage" class="rounded img-thumbnail mb-2" style="max-height: 150px; object-fit: cover;">
        <div>
            <label for="imagenId" class="btn btn-outline-secondary">
                Seleccionar archivo <input type="file" name="files" id="imagenId" class="d-none" />
            </label>
        </div>
    </div>

    <!-- Título de la capacitación -->
    <div class="mb-3">
        <label asp-for="NombreCapacitacion" class="form-label">Título de la Capacitación:</label>
        <input asp-for="NombreCapacitacion" class="form-control" placeholder="Escribe el título" required />
        <span asp-validation-for="NombreCapacitacion" class="text-danger"></span>
    </div>

    <!-- Descripción -->
    <div class="mb-3">
        <label asp-for="Duracion" class="form-label">Duración:</label>
        <input asp-for="Duracion" class="form-control" placeholder="Escribe la duración de la capacitación" />
        <span asp-validation-for="Duracion" class="text-danger"></span>
    </div>

    <!-- Mínimo de colaboradores -->
    <div class="mb-3">
        <label class="form-label">Mínimo de Colaboradores:</label>
        <div class="input-group">
            <button type="button" class="btn btn-outline-warning" id="MinColabDecrement">-</button>
            <input type="number" asp-for="MinPersonas" class="form-control text-center" id="MinColab" />
            <button type="button" class="btn btn-outline-warning" id="MinColabIncrement">+</button>
        </div>
    </div>

    <!-- Máximo de colaboradores -->
    <div class="mb-3">
        <label class="form-label">Máximo de Colaboradores:</label>
        <div class="input-group">
            <button type="button" class="btn btn-outline-warning" id="MaxColabDecrement">-</button>
            <input type="number" asp-for="MaxPersonas" class="form-control text-center" id="MaxColab" />
            <button type="button" class="btn btn-outline-warning" id="MaxColabIncrement">+</button>
        </div>
    </div>

    <!-- Modalidad -->
    <div class="mb-3">
        <label asp-for="Modalidad" class="form-label">Modalidad:</label>
        <select asp-for="Modalidad" class="form-select">
            <option value="Presencial">Presencial</option>
            <option value="Virtual">Virtual</option>
            <option value="Mixta">Mixta</option>
        </select>
    </div>


    <!-- Botones -->
    <div class="row">
        <div class="d-grid gap-2 d-md-flex justify-content-md-start">
            <button type="submit" class="btn btn-primary me-md-2">Actualizar</button>
            <a asp-controller="Categoria" asp-action="Index" class="btn btn-success">Regresar</a>
        </div>
    </div>

</form>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />

    <script>
        document.getElementById('imagenId').onchange = function (event) {
            const [file] = this.files;
            if (file) {
                const preview = document.getElementById('previewImage');
                preview.src = URL.createObjectURL(file);
            }
        };

        document.getElementById('MinColabIncrement').onclick = () => {
            let input = document.getElementById('MinColab');
            input.value = parseInt(input.value || 0) + 1;
        };

        document.getElementById('MinColabDecrement').onclick = () => {
            let input = document.getElementById('MinColab');
            if (parseInt(input.value || 0) > 0) {
                input.value = parseInt(input.value || 0) - 1;
            }
        };

        document.getElementById('MaxColabIncrement').onclick = () => {
            let input = document.getElementById('MaxColab');
            input.value = parseInt(input.value || 0) + 1;
        };

        document.getElementById('MaxColabDecrement').onclick = () => {
            let input = document.getElementById('MaxColab');
            if (parseInt(input.value || 0) > 0) {
                input.value = parseInt(input.value || 0) - 1;
            }
        };
    </script>
}