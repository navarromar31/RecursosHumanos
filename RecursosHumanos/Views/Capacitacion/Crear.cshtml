@using RecursosHumanos_Utilidades
@model RecursosHumanos_Models.Capacitacion

@{
    var titulo = "Crear nuevo capacitación";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<form asp-action="Crear" method="post" enctype="multipart/form-data" class="p-3">
    <!-- Imagen -->
    <div class="text-center mb-4">
        <!-- Vista previa de la imagen -->
        <img src="@Model?.ImagenUrlCap ?? " https: //via.placeholder.com/150"" id="previewImage"
             class="rounded img-thumbnail mb-2" style="max-height: 150px; object-fit: cover;" alt="Vista previa">

        <!-- Botón para seleccionar archivo -->
        <div>
            <label for="imagenId" class="btn btn-outline-secondary">
                Seleccionar archivo
                <input type="file" name="ImagenFile" id="imagenId" class="d-none" accept="image/*" />
            </label>
        </div>
    </div>

    <!-- Título de la capacitación -->
    <div class="mb-3">
        <label asp-for="NombreCapacitacion" class="form-label">Título de la Capacitación:</label>
        <input asp-for="NombreCapacitacion" class="form-control" placeholder="Escribe el título" required />
        <span asp-validation-for="NombreCapacitacion" class="text-danger"></span>
    </div>

    <!-- Descripción -->
    <div class="mb-3">
        <label asp-for="Duracion" class="form-label">Duración:</label>
        <input asp-for="Duracion" class="form-control" rows="3" placeholder="Escribe la duración de la capacitación"></input>
        <span asp-validation-for="Duracion" class="text-danger"></span>
    </div>

    <!-- Mínimo de colaboradores -->
    <div class="mb-3">
        <label class="form-label">Mínimo de Colaboradores:</label>
        <div class="input-group">
            <button type="button" class="btn btn-outline-warning" id="MinColabDecrement">-</button>
            <input type="number" asp-for="MinPersonas" class="form-control text-center" id="MinColab" readonly />
            <button type="button" class="btn btn-outline-warning" id="MinColabIncrement">+</button>
        </div>
    </div>

    <!-- Máximo de colaboradores -->
    <div class="mb-3">
        <label class="form-label">Máximo de Colaboradores:</label>
        <div class="input-group">
            <button type="button" class="btn btn-outline-warning" id="MaxColabDecrement">-</button>
            <input type="number" asp-for="MaxPersonas" class="form-control text-center" id="MaxColab" readonly />
            <button type="button" class="btn btn-outline-warning" id="MaxColabIncrement">+</button>
        </div>
    </div>

    <!-- Modalidad -->
    <div class="mb-3">
        <label asp-for="Modalidad" class="form-label">Modalidad:</label>
        <select asp-for="Modalidad" class="form-select">
            <option value="Presencial">Presencial</option>
            <option value="Virtual">Virtual</option>
            <option value="Mixta">Mixta</option>
        </select>
    </div>

    <!-- Botones -->
    <div class="d-flex justify-content-between">
        <button type="button" class="btn btn-secondary" onclick="history.back()">Cancelar</button>
        <button type="submit" class="btn btn-primary">Guardar</button>
    </div>
</form>

@section Scripts {
    <script>
        document.getElementById('imagenId').addEventListener('change', function (event) {
            const file = event.target.files[0];
            const previewImage = document.getElementById('previewImage');

            if (file) {
                const reader = new FileReader();

                reader.onload = function (e) {
                    previewImage.src = e.target.result; // Actualiza la vista previa con la imagen seleccionada
                };

                reader.readAsDataURL(file); // Convierte la imagen a base64 para la vista previa
            }
        });

        document.getElementById('MinColabIncrement').onclick = () => {
            let input = document.getElementById('MinColab');
            input.value = parseInt(input.value || 0) + 1;
        };

        document.getElementById('MinColabDecrement').onclick = () => {
            let input = document.getElementById('MinColab');
            if (parseInt(input.value || 0) > 0) {
                input.value = parseInt(input.value || 0) - 1;
            }
        };

        document.getElementById('MaxColabIncrement').onclick = () => {
            let input = document.getElementById('MaxColab');
            input.value = parseInt(input.value || 0) + 1;
        };

        document.getElementById('MaxColabDecrement').onclick = () => {
            let input = document.getElementById('MaxColab');
            if (parseInt(input.value || 0) > 0) {
                input.value = parseInt(input.value || 0) - 1;
            }
        };
    </script>
}
